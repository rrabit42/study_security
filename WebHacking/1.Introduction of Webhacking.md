# 1. 웹이란 무엇인가?  
### 해킹  
본래의 의도와는 다른 행위를 발생시키는 것  
-> 의도치 않은 행위를 발생시키기 위해 설계 또는 운영의 약점을 찾을 수 있어야함  
-> 설계자 또는 운영자보다 해당 시스템에 대한 더 높은 이해도를 가지고 있어야함  
**웹해킹 이전에 웹에 대한 기본적이 이해가 필수**  

## 웹  
월드 와이드 웹(World Wide Web, WWW, W3)  
웹의 사전적 의미-거미줄 : 인터넷 상에서 각각의 사용자(컴퓨터)가 연결되어 서로 정보를 공유한다는 의미에서 유래  
* 웹 : 인터넷 상의 서비스 중 **HTTP**를 이용하여 정보를 공유하는 통신 서비스  
* 웹 서버(Web Server) : 서비스를 제공하는 대상  
* 웹 클라이언트(Web Client) : 서비스를 받는 사용자  

웹은 웹 브라우저라는 **소프트웨어**의 등장과 발전으로 인해 대중적인 접근성이 높아짐  
다양한 형태의 서비스가 가능하기에 웹은 가장 많이 사용되는 **인터넷 서비스**가 됨  
단순히 웹사이트에 접속하는 형태 외에도 모바일 서비스, IoT 장비의 관리 페이지 등 다양한 형태가 있다.  
> IoT(Internet of Things, 각종 사물에 센서와 통신 기능을 내장하여 인터넷에 연결하는 기술)  

### 웹의 역사  
초기 웹 : 저장된 문서의 내용 출력해 사용자에게 제공  
+ 사용자 입력과 입력에 따른 기능 수행 추가  
+ 업무, 금융, 쇼핑 등 다양한 분야에서 활용  
즉, 보여주기만 하는 정적페이지에서 사용자와 상호작용하는 형태로 바뀜  

과거에는 오프라인에서 진행, 물리적으로 저장되었던 정보들이  
웹에서 접근 가능한 디지털 정보들로 바뀜.  
개인 정보 및 기업의 자산 등이 웹에서 접근 가능해짐 => 보안의 중요성이 강조!  

# 2. 웹 기초 지식  

<img width="500" alt="hi" src="https://user-images.githubusercontent.com/46364778/92628498-de698780-f307-11ea-9b44-f4189a7e770d.PNG">  

* 사용자가 드림핵 웹 사이트(http://dreamhack.io)에 접속 시 발생하는 과정을 간략히 표현한 그림  

1. 사용자는 컴퓨터 내에 존재하는 웹 브라우저 실행  
2. 주소창에 접속하고자 하는 사이트 주소 입력하여 접속  

## Web Browser(웹 브라우저)  
> 웹에 접속하기 위해 사용하는 소프트웨어  

문서 편집을 위해 워드 프로세서 소프트웨어 사용, 데이터 분석, 경리 및 회계 등의 계산을 위해 스프레드시트 소프트웨어 사용  
마찬가지로 웹을 사용하기 위해 웹 브라우저를 사용하는 것!
* **웹 브라우저**: HTTP를 통해 인터넷 상에서 통신을 하며 서버로부터 전달받은 다양한 웹 리소스들을 가공해  
사용자가 웹과 HTTP의 동작 원리를 알지 못해도 웹을 사용할 수 있도록 도와주는 소프트웨어  
ex) Chrome, Edge, Safari, Firefox 등  
각 브라우저들이 수행하는 기본 기능은 동일, BUT, HTML/CSS/JS 해석 및 실행을 빠르게 하거나 내장 로그인을 통해 브라우저를 사용하는 모든 디바이스 동기화 기능 등에 차별화를 둠  

모든 취약점은 **사용자의 입력 값**에서부터 시작됨.  
사용자의 입력값은 웹 브라우저를 통해 전송되기 때문에 웹 해킹을 공부하기 위해서는 브라우저가 하는 행위를 필수적으로 이해해야함!  

1. 웹브라우저를 통해 http://example.com/index.html 접속  
2. 웹브라우저는 index.html을 서버에 요청  
3. 서버는 index.html을 응답  
4. 웹브라우저는 index.html을 해석하고 출력  

#### 웹을 사용하는 다양한 방법  
**네트워크 프로그램**  
nc(netcat) 또는 telnet과 같은 네트워크 프로그램을 통해 웹을 사용하기 위해서는  
웹 서버가 이해하고 해석할 수 있는 형태(HTTP)의 데이터를 직접 작성하여 전송해야함  
```
$ echo -ne "GET / HTTP/1.1\r\nHost: example.com\r\n\r\n"| nc example.com 80
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: max-age=604800
Content-Type: text/html; charset=UTF-8
Date: Fri, 10 Jan 2020 07:24:17 GMT
Etag: "3147526947+gzip"
Expires: Fri, 17 Jan 2020 07:24:17 GMT
Last-Modified: Thu, 17 Oct 2019 07:18:26 GMT
Server: ECS (sgt/B3B1)
Vary: Accept-Encoding
X-Cache: HIT
Content-Length: 1256
<!doctype html>
<html>
<head>
    <title>Example Domain</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css">
...
    </style>    
</head>
<body>
<div>
    <h1>Example Domain</h1>
    <p>This domain is for use in illustrative examples in documents. You may use this
    domain in literature without prior coordination or asking for permission.</p>
    <p><a href="https://www.iana.org/domains/example">More information...</a></p>
</div>
</body>
</html>
```  

**CLI 프로그램**  
curl, wget과 같은 CLI 프로그램을 통해 웹을 사용하게 되면  
서버가 응답하여 주는 데이터를 단순히 출력만 하게 됨.  
즉, html을 해석하여 화면에 출력하는 기능, css로 스타일을 입혀주는 기능, 자바스크립트를 실행하는 기능 등은 포함되어 있지 않음.  
```
$ curl example.com
<!doctype html>
<html>
<head>
    <title>Example Domain</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css">
...
    </style>    
</head>
<body>
<div>
    <h1>Example Domain</h1>
    <p>This domain is for use in illustrative examples in documents. You may use this
    domain in literature without prior coordination or asking for permission.</p>
    <p><a href="https://www.iana.org/domains/example">More information...</a></p>
</div>
</body>
</html>
```  

**웹 브라우저**  
웹 브라우저에서 웹을 사용하기 위해서는  
주소창에 접속하고자 하는 주소 입력,  
웹 브라우저가 대신 접속해 서버에서 응답해주는 데이터 해석하여  
사용자가 보기 편하도록 화면에 출력해줌  

## Web Resource  
> 웹 상에 존재하는 모든 콘텐츠(HTML, CSS, JS, PDF, PNG 등)  

ex) ```http://dreamhack.io/index.html``` 주소 입력하면, ```dreamhack.io```에 존재하는 ```/index.html```리소스에 대해 요청 수행하는 것을 의미  

웹 리소스를 가리키는 이 주소들을 URL(Uniform Resource Locator)라고도 불리는데,  
*초기 웹에서는 경로 부분이 실제 서버 내에 존재하는 파일의 실제 위치와 직결, 최근에는 본래 목적인 추상화된 경로의 개념으로 더 사용됨*  

사용자가 웹 브라우저를 통해 보게 되는 페이지를 구성하는 **대표적인 웹 리소스**  
* HTML(Hyper Text Markup Language)  
웹 문서의 뼈대를 구축하기 위한 마크업 언어  
정해진 태그와 속성을 지정하여 문서 구성  

* CSS(Cascading Style Sheets)  
HTML이 표시되는 방법을 정의하는 스타일 시트 언어  
이미지, 태그, 글자 등 다양한 웹 리소스들의 출력 시 스타일을 설정함  

* JS(JavaScript)  
HTML과 CSS는 화면에 출력되는 뼈대를 그리는 것,  
JS와 같은 Client Side Script를 이용하여 페이지 내에서의 행위들을 설정할 수 있음.(동적 기능)  

* Etc  
문서, 이미지, 동영상, 폰트 등  


## URI(URL)  
> URI(Uniform Resource Identifier) 리소스를 식별하기 위한 식별자  

URL(Uniform Resource Locator)은 리소스의 **위치**를 식별하기 위한 URI의 하위 개념  
웹에 접속할 때 웹 사이트의 주소(위치)를 이용해 접근하는 것은 URL이자 URI을 사용한 것  

URI는 아래와 같은 구성요소를 가지고 있다. 추가적인 URI 정보는 공식스펙(RFC)인 [RFC 3986](https://tools.ietf.org/html/rfc3986)에서 확인  

<img width="355" alt="12" src="https://user-images.githubusercontent.com/46364778/92630768-49688d80-f30b-11ea-86cd-bb4221cf1c6e.PNG">  

* Scheme : 웹 서버에 접속할 때 어떤 체계(프로토콜)를 이용할지에 대한 정보  
* Host : Authority의 일부로써 접속할 웹 서버의 호스트(서버주소)에 대한 정보  
* Port : Authority의 일부로써 접속할 웹 서버의 포트에 대한 정보  
* Path : 접속할 웹 서버의 경로에 대한 정보, /로 구분됨  
* Query : 웹 서버에 전달하는 파라미터(추가적인 정보), URI에서 ? 뒤에 붙음  
* Fragment : 메인 리소스 내에 존재하는 서브 리소스에 접근할 때 이를 식별하기 위한 정보, URI에서 # 뒤에 붙음  

ex) ```http://example.com:80/path?search=1#fragment```  
|구성요소|예|설명|  
|:---:|:---:|:---:|  
|Scheme|http://|웹 브라우저가 어떤 통신규약(프로토콜)을 사용할지 지정. 보통 http/https를 사용, 이 외에도 mailto, tel을 통해 메일 클라이언트나 연락처 프로그램을 열기도 함|  
|Host|example.com|웹 브라우저가 어디에 연결할지 정하는 호스트 주소. 도메인이나 IP Address가 호스트로서 사용될 수 있음|  
|Path|/path|웹 브라우저가 연결하려고 하는 리소스에 대한 경로|  
|Query|?search=1|웹 브라우저가 서버에게 전달하는 파라미터|  
|Fragment|#fragment|웹 브라우저만 가지고 있는 데이터. 메인 리소스(페이지) 내에서 서브 리소스를 식별할 때 사용|  


## Encoding  
> 문자 또는 기호 등의 정보, 형태를 표준화, 보안 등의 목적으로 다른 형태나 형식으로 변환하는 처리 혹은 그 처리 방식  
> Decoding: 다시 원래 형태로 변경하는 것  

> Encoding(인코딩): 알고리즘이 모두 공개되어 있고 키와 같은 요소가 포함되어 있지 않아서 모두가 원래의 정보로 복원 가능  
> Encryption(인크립션) : 양방향 암호 알고리즘. 일치한 알고리즘과 유효한 키를 가지고 있다면 원래의 정보로 복원 가능  

### 웹에서 사용하는 대표적인 인코딩  
* **URL Encoding(percent encoding)**  

URI 구조 내에서 **예약어(구분자)**로 사용되는 문자들을 전송하고자 할 때 사용.  
예약어들은 URI 구조 내에서 문법적으로 중요한 의미를 가지고 있기에,  
문법적으로 사용되지 않을 경우에는 반드시 인코딩 되어 사용되어야함.  
> GET 메소드로 ```a=?b```, ```c=&d``` 의 데이터를 보내기 위해서는  
```http://example.com/?a=%3Fb&c=%26d```의 형태로 전송되어야 서버에서도 정상적으로 데이터를 해석하여 처리 가능  
즉, ?는 %3F, &는 %26으로 인코딩  

**인코딩 방식 = ```%``` + (입력된 문자를 ASCII 테이블에서 매칭되는 HEX값)**  
|문자|URL인코딩|  
|:---:|:---:|  
|?|%3F|  
|#|%23|  
|&|%26|  
|=|%3D|  

* **HTML entity Encoding**  

HTML 문서 내에서 사용되는 문자열들이 **HTML에서 사용하는 태그**들의 문자로 인식되지 않도록 하기 위해 사용.  

**인코딩 방식 = ```&#x``` + (입력된 문자를 ASCII테이블에서 매칭되는 HEX값) + ```;```**  
or 주요 문자들에 대해서는 지정되어 있는 **Entity name(앞은 #, 뒤는 ;로 끝남)** 사용하여 인코딩    

|문자|Entity name encoding|Entity number encoding|  
|:---:|:---:|:---:|  
|&|&amp;|&#x26;|  
|<|&lt;|&#x3C;|  
|>|&gt;|&#x3E;|  




## HTTP(HyperText Transfer Protocol)  
> 인터넷 서비스에서는 서비스 대상 간 통신 규약(Protocol)을 지정하여 통신  
HTTP는 웹을 이용하기 위한 통신 규약  

## HTTPS(HyperText Transfer Protocol Secure)  
> 기존 HTTP 데이터를 암호화하여 통신  

## Cookie  
> 웹 브라우저에 저장하는 데이터  

## Session  
> 서버에 저장하는 데이터  

## Domain Name  
> 인터넷(웹) 네트워크 상에서 컴퓨터를 식별하는 이름  
ex) www.naver.com은 네이버의 서버 컴퓨터를 식별하는 이름  

## Server  
> 서버는 인터넷 상에서 사용자에게 서비스를 제공하는 컴퓨터  
그 중 웹 서버는 사용자(웹브라우저)와 HTTP를 이용하여 통신하는 서버  

## Application  
> 서버에서 설정한 특정 기능들을 수행하는 소프트웨어  

## Database(DB)  
> 데이터를 저장하기 위해 사용하는 데이터 저장소  

