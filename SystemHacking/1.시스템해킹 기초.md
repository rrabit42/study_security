# 1.해킹의 기초  
### - 해킹이란?  
컴퓨터의 하드웨어나 소프트웨어, 네트워크, 웹사이트 등 각종 정보 체계에서 주어진 권한 이상을 얻거나 의도하지 않은 동작을 일으키는 행위  

### - 해킹의 분류  
시스템해킹: 프로그램의 약점 공격  
그 중에서 우린 소프트웨어 해킹에 대해 공부할 것이다.

### - 해킹의 원리  
만약 프로그래머가 예외처리를 빼먹는다면, 영리한 해커는 프로그램의 규칙을 악용해 자신이 원하는 바를 달성할 수 있을 것.  
프로그램이 잘못된 결과를 내거나, 오류를 발생하는 등의 의도치 않은 동작을 수행하게 되는 문제를 <b>소프트웨어 버그(=소프트웨어 취약점)</b>라 한다.  
1. 프로그래머의 실수  
2. 개발자의 잘못된 가정 -> 항상 올바른 입력이 들어올 것이다. ex) 하트블리드 취약점, 2014, OpenSSL

# 2. 취약점이란?
### - 취약점의 분류  
익스플로잇(악용): 취약점을 이용해 공격자가 의도한 동작을 수행하게 하는 코드 혹은 이를 이용한 공격행위  

```소프트웨어 버그(Bug)``` : 프로그래머가 의도하지 않은 동작을 수행  
```소프트웨어 취약점(Vulnerability)``` : 버그 중 보안에 영향을 미칠 수 있는 버그  
```익스플로잇 가능한 취약점(Exploitable Vulnerability)``` : 소프트웨어 취약점 중 이를 이용해 공격자가 의도한 동작을 수행할 수 있는 버그  
But, 익스플로잇이 가능하다고 해서 익스플로잇을 항상 안정적으로 성공할 수 있는 것은 아니다. 보안 취약점에서 익스플로잇 확률은 위험성을 평가하는 요소 중 하나인데, 이는 익스플로잇 확률이 높을 수록 무기화되어 사용하기 유용하고, 공격이 탐지될 확률이 줄어들기 때문이다.  
```안정적으로 익스플로잇 가능한 취약점(Reliably Exploitable Vulnerability)``` : 익스플로잇이 가능한 취약점 중 매우 높은 확률로 공격에 성공할 수 있는 버그  

### - Attack Vector  
모든 소프트웨어 취약점은 소프트웨어와 공격자가 상호작용하는 곳, 즉 사용자의 입력에서부터 발생. 이를 Attack Vector(공격벡터)라고 한다.  
이러한 Attack Vector들의 집합을 Attack Surface라고 함.  
프로그램의 unreachable 영역에 심각한 보안 취약점이 있다고 가정하자. 만약 해당 코드가 어디에서도 사용되지 않고 공격자가 이를 실행할 방법이 없다면 이는 보안 취약점이라고 할 수 없다.
그러나 이러한 코드들도 잠재적으로 악용될 수 있는 코드이기 때문에 존재해서는 안된다.  
따라서 프로그래머는 사용자에게서 입력받는 부분을 철저히 검증해야함.

### - 취약점의 종류 - 메모리 커럽션 취약점(Memory Corruption)
C/C++와 같이 저수준 언어에서 메모리를 조작해 공격  

* ```Buffer Overflow(BOF)```  
프로그래머가 할당한 크기의 버퍼보다 더 큰 데이터를 입력받아 메모리의 다른 영역까지 오염시킬 수 있는 취약점  

* ```Out-of-Boundary(OOB)```   
버퍼의 길이를 벗어나는 곳의 데이터에 접근할 수 있는 취약점  

* ```Off-by-One```  
경계 검사에서 하나 더 많은 값을 쓸 때 발생하는 취약점  
ex. 32 바이트 크기의 버퍼에 인덱스 32로 접근하는 것 같은 경우.  
이는 반복문을 순회할 때 잘못된 비교연산자를 사용하거나 인덱스가 0부터 시작하는 것을 고려하지 못했을 때 자주 발생  

* ```Format String Bug(FSB)```  
print나 sprintf와 같은 함수에서 포맷스트링 문자열을 올바르게 사용하지 못해 발생하는 취약점. 최신 컴파일러에서는 이를 잘 방어하고 있어 최근에는 잘 발생하지 않는다.  

* ```Double Free/Use-After-Free(UAF)```  
동적할당된 메모리를 정확히 관리하지 못했을 때 발생.  
이미 해제된 메모리를 다시 한번 해제하려고 시도하는 것을 Double Free  
해제된 메모리에 접근해 이를 사용하려고 하는 것은 Use-After-Free

### - 취약점의 종류 - 로지컬 버그(Logical)  
메모리를 조작할 필요없이 공격할 수 있음 -> 익스플로잇 작성이 상대적으로 간단  

* ```Command Injection```  
사용자의 입력을 Shell에 전달해 실행할 때 정확한 검사를 실행하지 않아 발생. 이는 공격자가 원하는 명령을 실행할 수 있는데 비해 익스플로잇이 어렵지 않아 매우 강력한 취약점  

* ```Race condition```  
보안 취약점으로서 Race Condition은 여러 쓰레드나 프로세스의 자원관리를 정확히 수행하지 못해 데이터가 오염되는 취약점. 레이스 컨디션은 발생 원인과 공격기법에 따라 메모리 커럽션 취약점으로도, 로지컬 취약점으로도 분류할 수 있는 취약점  

* ```Path Traversal```  
프로그래머가 가정한 디렉토리를 벗어나 외부에 존재하는 파일에 접근할 수 있는 취약점. 이는 주로 소스코드에서 "../"와 같은 경로 문자를 검사하지 않아 발생  

# 3. 보호기법(Mitigation)  
ex. Stack BOF의 보호기법 중 하나인 Stack Smashing Protector(SSP)는 버퍼 뒤에 랜덤한 값을 넣어두고, 이 값을 특정 시점에 검사하여 버퍼오버플로우가 발생했는지를 탐지.
그리고 만약 공격이 발생했다면 프로그램을 강제로 종료시킴.
이로 인해 공격자는 프로그램에서 버퍼 오버플로우 취약점을 발견해도 공격에 이용하기 어려워짐.  
```공격자```  => || 방패(Mitigation의 역할) ||    취약점을 포함한 프로그램  
